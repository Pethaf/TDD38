#include <iostream>
#include <string>
#include <vector>
#include <fstream>
using namespace std;

int main(int argc, char * argv[]) 
{

	if ( argc != 2 )
	{
		cerr << "Call as \"" << argv[0] << " input_file\"\n";
		return 1;
	}

	vector<string> words;

	using st = vector<string>::size_type;

	ifstream ifs {argv[1]};

	if (!ifs)
	{
		cerr << "Couldn't open file \"" << argv[1] << "\" exiting!\n";
		return 2;
	}

	for ( string word; ifs >> word; )
	{
		bool found {};
		for ( st i {}; i < words.size(); ++i )
		{
			if ( word == words.at(i) )
			{
				found = true;
				break;
			}
		}
		if ( ! found )
			words.push_back(word);	
	}

	cout << "All unique words: ";

	for ( st i {}; i < words.size(); ++i )
	{
		cout << words.at(i) << "\n";
	}

	for ( st i {}; i < words.size(); ++i )
	{
		for ( auto j = words.size() - 1; j > i; --j )
		{
			auto & w1 = words.at(i);
			auto & w2 = words.at(j);
			if (w2.length() > w1.length() || (w2.length() == w1.length() && w2 > w1))
				std::swap(w1, w2);
		}
	}
	
	cout << "Sorted: ";

	for ( st i {}; i < words.size(); ++i )
	{
		cout << words.at(i) << " ";
	}

	string all;
	for ( st i {}; i < words.size(); ++i )
	{
		all = all + words.at(i);
	}
	cout << "\n\nOne long string: " << all << endl;
}


